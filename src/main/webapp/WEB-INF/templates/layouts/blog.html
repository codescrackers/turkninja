<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<link rel="icon" href="/favicon.ico" th:href="@{/favicon.ico}"
	type="image/x-icon" />

<title>Yazılım Okulu</title>

<!-- jQuery -->
<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>

<!-- jQuery validation plugin -->
<script
	src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>

<!-- Bootstrap -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css" />
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<!-- jQuery ui -->
<link rel="stylesheet"
	href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>

<script src="../../../js/external/bootbox.min.js"
	th:src="@{/js/external/bootbox.min.js}"></script>

<script src="../../../js/common.js" th:src="@{/js/common.js}"></script>

<script th:inline="javascript"> var rootContext = [[${#httpServletRequest.getContextPath()}]]; </script>

<link rel="stylesheet" type="text/css" href="../../../css/blog.css"
	th:href="@{/css/blog.css}" />
</head>

<body ng-app="blog">

	<script th:inline="javascript">
		window.postsUrl = /*[[@{/posts}]]*/'';
		window.popularPostsUrl = /*[[@{/posts/top}]]*/'';
	</script>

	<div class="container" ng-controller="TagController as tagCtrl">
		<div class="row">
			<div class="col-sm-8 col-sm-offset-2">
				<header class="page-header">
					<div class="col-padding">
						<ul class="nav navbar-nav">
							<li><a th:href="@{/}"><img class="img-responsive" width="80" height="80" th:src="@{/images/turkninja_logo.png}"/> </a></li>
						</ul>
						<ul class="nav navbar-nav">

							<li><a th:href="@{/}">Ana Sayfa</a></li>

							<li class="dropdown"><a href="#" class="dropdown-toggle"
								data-toggle="dropdown" role="button" aria-expanded="false">Kategoriler
									<span class="caret"></span>
							</a>

								<ul class="dropdown-menu" role="menu">
									<li><a href="">Java</a></li>
									<li><a href="">JavaEE</a></li>
									<li><a href="">Spring-core</a></li>
									<li><a href="">Spring-MVC</a></li>
									<li><a href="">Spring-Data</a></li>
									<li><a href="">Spring-Security</a></li>
									<li><a href="">MongoDB</a></li>
								</ul></li>

							<li class="dropdown"><a href="#" class="dropdown-toggle"
								data-toggle="dropdown" role="button" aria-expanded="false">Kitap
									Çözümleri <span class="caret"></span>
							</a>
								<ul class="dropdown-menu" role="menu" th:each="book,iterationStatus  : ${books}">
									
										<li><a th:href="@{/book/{bookUrl}?bookId={bookId}(bookUrl=${book.urlUniqueName},bookId=${book.id})}"  th:text="${book.name}">book</a></li>
								</ul></li>

						</ul>
					</div>
				</header>
			</div>
		</div>

		<div class="row">
			<section class="col-sm-2">
				<div class="col-padding">

					<div th:unless="${#authorization.expression('isAuthenticated()')}">
						<th:block th:include="fragments/loginform :: form ('leftcol')" />
					</div>

					<div th:if="${#authorization.expression('isAuthenticated()')}">
						<strong sec:authentication="name"> ile giriş yapıldı</strong>

						<div>
							<a th:href="@{/logout}">Çıkış</a>
						</div>

						<div class="user-menu">
							<div class="user-menu-item" sec:authorize="hasRole('ROLE_ADMIN')">
								<a th:href="@{/posts/create}" role="button"
									class="btn btn-primary"> <span
									class="glyphicon glyphicon-pencil"></span> Gönderi Ekle
								</a>
							</div>
							<div class="user-menu-item">
								<a th:href="@{/settings}" role="button" class="btn btn-primary">
									<span class="glyphicon glyphicon-cog"></span> Ayarlar
								</a>
							</div>
							<div class="user-menu-item">
								<a th:href="@{/edit_profile}" role="button"
									class="btn btn-primary"> <span
									class="glyphicon glyphicon-user"></span> Profil Ayarları
								</a>
							</div>
						</div>
					</div>
				</div>
			</section>

			<section class="col-sm-6">

				<div class="col-padding">
					<section id="pageContent" layout:fragment="content"></section>
				</div>
			</section>

			<section class="col-sm-4">
				<div class="col-padding">
			
						<div class="form-group">
							<label for="tagSearchInput">Etikete göre ara</label> 
							<input type="text"  autocomplete="off" class="form-control" id="tagSearchInput" ng-model="tagCtrl.tagName" ng-keydown="tagCtrl.getAllTags()"
								name="tagged" placeholder="php, spring"/>
						</div>
							
							
							<div class="btn-group" role="group" aria-label="..." ng-if="tagCtrl.tagName.length > 1">
							  <button type="button" class="btn btn-default" ng-click="tagCtrl.getPostsByTagName(tag)" ng-repeat="tag in tagCtrl.tagList | filter:tagCtrl.tagName as results">{{ tag }}</button>
							</div>
							

					<div id="latestPosts" class="panel panel-default">
						<div class="panel-body">
							<h4>Son Gönderiler</h4>


						</div>
					</div>

					<div id="popularPosts" class="panel panel-default">
						<div class="panel-body">
							<h4>Popüler Gönderiler</h4>


						</div>
					</div>
				</div>
			</section>
		</div>
	</div>

	<footer class="page-footer">
		<p>&copy; 2016 Yazılım Okulu</p>
		<p>
			<a href="https://github.com/codescrackers/yazilim-okulu">https://github.com/codescrackers/yazilim-okulu</a>
		</p>
	</footer>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.js"></script>
	<script src="../../../js/app.js" th:src="@{/js/app.js}"></script>
	<script src="../../../js/service/tag_service.js" th:src="@{/js/service/tag_service.js}"></script>
	<script src="../../../js/controller/tag_controller.js" th:src="@{/js/controller/tag_controller.js}"></script>
</body>
</html>